\* TLC Model Checking Configuration for MassOperations
\* Run with: tlc MassOperations.tla -config MassOperations.cfg

\* ============================================================================
\* CONSTANT DEFINITIONS
\* ============================================================================

\* Small model - 4 users, 1 admin
CONSTANT
    USERS = {admin, u1, u2, u3}
    ADMIN_ID = admin
    BATCH_SIZE = 2
    NULL = NULL

\* ============================================================================
\* SPECIFICATION
\* ============================================================================

SPECIFICATION Spec

\* ============================================================================
\* CRITICAL SAFETY INVARIANTS - ADMIN PROTECTION
\* ============================================================================

\* Admin is NEVER processed (most critical)
INVARIANT AdminNeverProcessed

\* Admin never in succeeded set
INVARIANT AdminNeverSucceeded

\* Admin never in failed set
INVARIANT AdminNeverFailed

\* Admin never in current batch
INVARIANT AdminNeverInBatch

\* Admin never queued for processing
INVARIANT AdminNeverQueued

\* ============================================================================
\* SET RELATIONSHIP INVARIANTS
\* ============================================================================

\* Succeeded and failed are disjoint
INVARIANT SucceededFailedDisjoint

\* Outcomes come from processed set
INVARIANT OutcomesFromProcessed

\* Batch is not yet processed
INVARIANT BatchNotProcessed

\* ============================================================================
\* PROGRESS INVARIANTS
\* ============================================================================

\* Progress is bounded
INVARIANT BoundedProgress

\* Batch size respected
INVARIANT BatchSizeRespected

\* ============================================================================
\* LIVENESS PROPERTIES
\* ============================================================================

\* Operation eventually completes
PROPERTY OperationEventuallyCompletes

\* All users eventually processed
PROPERTY AllUsersEventuallyProcessed

\* ============================================================================
\* TEMPORAL PROPERTIES
\* ============================================================================

\* Admin is always protected (temporal)
PROPERTY AdminAlwaysProtected

\* ============================================================================
\* COMBINED SAFETY
\* ============================================================================

INVARIANT Safety
